<div class="wrapper">

  <div class= "side-bar">
    <%= render "side_bar"%>
  </div>

  <div class="main-display">

    <div class="top-display">
      <div class="top-display-title">
        商品 > 編集
      </div>
    </div>

    <div class="lower-display">
      <div class="sort-by-code", id="sort-by-code-display">
        <table>
          <tr>
            <th class="th-item-category">カテゴリー</th>
            <th class="th-item-code">商品コード</th>
            <th class="th-item-name">商品名</th>
            <th class="th-item-stock">在庫数</th>
            <th class="th-item-monthly-sales">想定月間販売数</th>
          </tr>
          <% @items.each do |item|%>
            <% if item.id == @item.id%>
              <div class="item-form-and-error">
                <%= form_with model:@item, local: true do |f| %>
                  <%= render "error_messages", model: f.object %>
                  <tr>
                    <td><%= f.collection_select(:category_id, Category.all, :id, :name, {selected: item.category_id}, {class:"item-category-form item-form"}) %></td>
                    <td><%= f.text_field :code, class:"item-code-form item-form", value: item.code %></td>
                    <td><%= f.text_field :name, class:"item-name-form item-form", value: item.name %></td>
                    <td><%= f.number_field :stock, min:0, class:"item-stock-form item-form", value: item.stock %></td>
                    <td><%= f.number_field :monthly_sales, min:0, class:"item-monthly-sales-form item-form", value: item.monthly_sales %></td>
                    <td><%= f.submit "確定", class:"item-submit-form item-form" %></td>
                  </tr>
                <% end %>
              </div>
            <% else %>
              <tr>
                <th class="th-item-category">カテゴリー</th>
                <th class="th-item-code">商品コード</th>
                <th class="th-item-name">商品名</th>
                <th class="th-item-stock">在庫数</th>
                <th class="th-item-monthly-sales">想定月間販売数</th>
              </tr>
            <% end %>
          <% end %>
        </table>
      </div>
    </div>
  </div>
</div>