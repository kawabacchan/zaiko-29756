<div class="wrapper">
  <div class= "side-bar">
    <%= render "side_bar"%>
  </div>

  <div class="item-display">
    <div class="item-header">
      <div class="item-header-title">
        商品 > 一覧表示
      </div>
      <div class="item-indicate-btn">
        <ul>
          <li class="lightblue", id="sort-by-code">コード順表示</li>
          <li id="sort-by-category">カテゴリー別表示</li>
          <li id="sort-creation-list">発注リスト表示</li>
        </ul>
      </div>
      <%= form_with url: compare_items_path, local: true do |f| %>
        <%= f.file_field :file %>
        <%= f.submit "本社ー工場 在庫照合"%>
      <% end %>
    </div>

    <div class="item-display-contents">

      <div class="sort-by-code", id="sort-by-code-display">
        <% if @items %>
          <% @items.each do |item|%>
            <% if item.stock <= (item.monthly_sales * 0.1)+ 3 %>
              <div class="red">
                <%= render partial: "item_display_content", locals: {item: item} %>
              </div>
            <% elsif item.stock <= item.monthly_sales * 0.5 %>
              <div class="yellow">
                <%= render partial: "item_display_content", locals: {item: item} %>
              </div>
            <% else %>
              <%= render partial: "item_display_content", locals: {item: item} %>
            <%end%>
          <% end %>
        <% end %>
      </div>

      <div class="sort-by-category", id="sort-by-category-display">
        <% Category.all.where.not(id:1).each do |category|%>
          <div class="category-name">
            <%= category.name %>
          </div>
          <% @items.each do |item| %>
            <%if item.category.name == category.name %>
              <%= render partial: "item_display_content", locals: {item: item} %>
            <% end %>
          <% end %>
        <% end %>
      </div>

      <div class="sort-creation-list", id="sort-creation-list-display">
        <div class="creation-list-title">
          最優先発注依頼リスト
        </div>
        <% @items.each do |item|%>
          <% if item.stock <= (item.monthly_sales * 0.1)+ 3 %>
            <%= render partial: "item_display_content", locals: {item: item} %>
          <% end %>
        <% end %>
        <div class="creation-list-title">
          発注依頼リスト
        </div>
        <% @items.each do |item|%>  
          <% if (item.stock <= item.monthly_sales * 0.5) && (item.stock > (item.monthly_sales * 0.1)+ 3) %>
            <%= render partial: "item_display_content", locals: {item: item} %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>